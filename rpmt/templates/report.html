{% extends 'base.html' %}

{% block title %}Projects Report - RPMT{% endblock %}

{% block content %}
<div class="container text-center">
    <form action="#" method="POST">
        {{ form.hidden_tag() }}
        <div class="row mb-3 d-flex align-items-center justify-content-center">
            <div class="col">
                <div class="row mb-3" style="text-align: left;">
                    {{ form.author.label(class="form-label") }}
                    {{ form.author(class="form-control w-50", style="height: 40px;", type="text", placeholder="Search Author") }}
                </div>
                <div class="row mb-3" style="text-align: left;">
                    <div class="col" style="text-align: left;">
                        {{ form.start_date.label(class="form-label") }}
                        {{ form.start_date(class="form-control") }}
                    </div>
                    <div class="col" style="text-align: left;">
                        {{ form.end_date.label(class="form-label") }}
                        {{ form.end_date(class="form-control") }}
                    </div>
                </div>
                {{ form.submit(class="btn btn-warning m-1", style="width: 15%;") }}
            </div>
        </div>
    </form>
    <div style="text-align: left; height: 450px;" class="row p-3 rounded-3 bg-gradient border border-dark-subtle overflow-y-scroll align-items-center justify-content-center">
        <a href="{{ url_for('download_file', filename="report.csv") }}" class="btn m-2 btn-secondary">
            <h3>Download Report</h3>
        </a>
        <h3>Author Name: No. of Publications</h3>
        {% for author in authors %}
            <h4>{{ author.name }}: {{ author.project_count }}</h4>
        {% endfor %}
        <h3>Project Title: Date Published</h3>
        {% for project in projects %}
            <h4>{{ project.title }}: {{ project.date_published }}</h4>
        {% endfor %}
    </div>
</div>
{% endblock %}
